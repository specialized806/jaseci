# Ruff configuration

target-version = "py311"
line-length = 88

# Exclude same paths as pre-commit
exclude = [
    "jac/jaclang/vendor/",
    "jac/jaclang/compiler/larkparse/jac_parser.py",
    "jac/jaclang/compiler/larkparse/ts_parser.py",
    # Parser transformers with many callbacks following established patterns
    "jac/jaclang/compiler/ts_parser.py",
    "jac/jaclang/compiler/tsparser.py",
    # Examples may contain Python 3.12+ syntax for demonstration
    "jac/examples/",
]

[lint]
select = [
    "E",      # pycodestyle errors
    "F",      # Pyflakes
    "N",      # pep8-naming
    "C4",     # flake8-comprehensions
    "I",      # isort (import sorting)
    "B",      # flake8-bugbear
    "ANN",    # flake8-annotations
    "SIM",    # flake8-simplify
    "UP",     # pyupgrade
]

# TODO: Make strict: Ignore E501 (line too long) - let formatter handle code, accept long strings/comments
ignore = ["E501"]

# Enable auto-fix for all fixable rules
fixable = ["ALL"]

[lint.isort]
known-first-party = ["jaclang", "jac_client", "jac_scale", "byllm"]

[lint.flake8-annotations]
# Don't require annotations for self/cls
suppress-none-returning = true

[lint.per-file-ignores]
# Test files don't require type annotations and may use simplified patterns
"**/tests/**/*.py" = ["ANN001", "ANN201", "ANN202", "SIM105", "SIM115"]
"**/test_*.py" = ["ANN001", "ANN201", "ANN202", "SIM105", "SIM115"]
"**/*_test.py" = ["ANN001", "ANN201", "ANN202", "SIM105", "SIM115"]
# Scripts may have simpler annotation requirements
"**/scripts/**/*.py" = ["ANN001", "ANN201"]
# Test fixtures may have unconventional patterns for testing purposes
"**/fixtures/**/*.py" = ["ANN", "F403", "F401", "E402", "C408", "SIM105"]
# Legacy module naming and dynamic wrappers (renaming would break imports)
"jac-scale/jac_scale/jserver/jfastApi.py" = ["N999", "ANN401"]
